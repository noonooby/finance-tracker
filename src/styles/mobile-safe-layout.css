/* MODERN MOBILE-SAFE LAYOUT - Industry Standard Solution */

/* 
 * Uses env(safe-area-inset-bottom) for iOS notch
 * Uses 100dvh for dynamic viewport
 * Simplified calc() for CSS minimizer compatibility
 */

/* ============================================
 * MAIN PAGE CONTENT - Safe from bottom nav
 * ============================================ */

/* On mobile, ensure content doesn't go behind nav */
@media (max-width: 768px) {
  /* Main content area */
  body {
    padding-bottom: 80px;
    padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 80px);
  }
  
  /* Grid layouts need extra bottom space */
  div[class*="grid"] {
    padding-bottom: 20px;
  }
}

/* ============================================
 * MODALS - Safe from bottom nav
 * ============================================ */

/* Modal overlay - use dynamic viewport height */
div.fixed.inset-0.bg-black.bg-opacity-50 {
  height: 100vh;
  height: 100dvh;
  
  /* Safe padding */
  padding: 8px;
  padding-bottom: 20px;
}

@media (max-width: 768px) {
  div.fixed.inset-0.bg-black.bg-opacity-50 {
    /* Extra space for mobile bottom nav */
    padding-bottom: 100px;
    padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 80px);
  }
}

/* Modal content - dynamic height */
div.fixed.inset-0.bg-black.bg-opacity-50 > div[class*="rounded-lg"] {
  max-height: calc(100vh - 100px);
  max-height: calc(100dvh - 100px);
  display: flex;
  flex-direction: column;
}

@media (max-width: 768px) {
  div.fixed.inset-0.bg-black.bg-opacity-50 > div[class*="rounded-lg"] {
    max-height: calc(100vh - 140px);
    max-height: calc(100dvh - 140px);
  }
}

/* ============================================
 * SCROLLABLE CONTENT - Safe scrolling
 * ============================================ */

/* Any scrollable container on main page */
div[class*="overflow-y-auto"]:not(.modal-scroll) {
  padding-bottom: 100px;
  padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 80px);
}

/* Modal scrollable areas */
div.fixed.inset-0.bg-black.bg-opacity-50 div[class*="overflow-y-auto"] {
  padding-bottom: 20px;
  padding-bottom: env(safe-area-inset-bottom, 20px);
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* ============================================
 * BUTTONS AT BOTTOM - Always visible
 * ============================================ */

@media (max-width: 768px) {
  /* Buttons in cards need extra bottom margin */
  div[class*="rounded-lg"] > div:has(button):last-child {
    margin-bottom: 20px;
  }
  
  /* Last element in grid should have extra margin */
  div[class*="grid"] > div:last-child {
    margin-bottom: 80px;
  }
}

/* ============================================
 * UTILITY CLASSES
 * ============================================ */

/* Add this class to any element that should respect safe areas */
.safe-bottom {
  padding-bottom: 100px !important;
  padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 80px) !important;
}

/* For modals specifically */
.modal-safe {
  padding-bottom: 30px !important;
  padding-bottom: calc(env(safe-area-inset-bottom, 0px) + 20px) !important;
}
